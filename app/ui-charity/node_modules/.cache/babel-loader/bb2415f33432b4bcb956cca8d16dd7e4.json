{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Cart_1 = require(\"../../actions/Cart\");\n\nexports.ActionType = Cart_1.ActionType;\n\nvar type_validate_1 = require(\"../type-validate\");\n\nvar utils_1 = require(\"../utils\");\n\nvar addressSchema = type_validate_1.matchesObject({\n  address1: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  address2: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  city: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  company: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  firstName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  lastName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  phone: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  province: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  country: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  zip: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  name: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  provinceCode: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  countryCode: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar discountSchema = type_validate_1.matchesObject({\n  amount: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  discountDescription: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  type: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  discountCode: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar discountAmount = type_validate_1.matchesObject({\n  amount: type_validate_1.matchesPositiveNumber(),\n  discountDescription: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  type: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar discountCode = type_validate_1.matchesObject({\n  discountCode: type_validate_1.matchesString()\n});\nvar lineItemSchema = type_validate_1.matchesObject({\n  price: type_validate_1.makeOptional(type_validate_1.matchesPositiveNumber()),\n  quantity: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  title: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  variantId: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  discount: type_validate_1.makeOptional(discountAmount)\n});\nvar updateLineItemSchema = type_validate_1.matchesObject({\n  quantity: type_validate_1.matchesPositiveInteger()\n});\nvar customerSchema = type_validate_1.matchesObject({\n  id: type_validate_1.makeOptional(type_validate_1.matchesPositiveInteger()),\n  email: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  firstName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  lastName: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  note: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  addresses: type_validate_1.makeOptional(type_validate_1.matchesArray(addressSchema))\n});\nvar noteSchema = type_validate_1.matchesObject({\n  name: type_validate_1.matchesString(),\n  value: type_validate_1.matchesString()\n});\nvar cartSchema = type_validate_1.matchesObject({\n  cartDiscount: type_validate_1.makeOptional(discountSchema),\n  customer: type_validate_1.makeOptional(customerSchema),\n  grandTotal: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  lineItems: type_validate_1.makeOptional(type_validate_1.matchesArray(lineItemSchema)),\n  noteAttributes: type_validate_1.makeOptional(type_validate_1.matchesArray(noteSchema)),\n  subTotal: type_validate_1.makeOptional(type_validate_1.matchesString()),\n  taxTotal: type_validate_1.makeOptional(type_validate_1.matchesString())\n});\nvar propertiesSchema = type_validate_1.composeSchemas(type_validate_1.matchesObject({}), function (value) {\n  var validator = type_validate_1.matchesString();\n  var schema = Object.keys(value).reduce(function (acc, key) {\n    acc[key] = validator;\n    return acc;\n  }, {});\n  return type_validate_1.validate(value, type_validate_1.matchesObject(schema));\n});\nvar matchesStringArray = type_validate_1.matchesArray(type_validate_1.matchesString());\n\nfunction createDataValidator(data) {\n  return utils_1.createActionValidator(Cart_1.ActionType, data ? type_validate_1.matchesObject({\n    data: data\n  }) : undefined, true, true);\n}\n\nfunction createDataValidatorWithIndex(data) {\n  var indexSchema = type_validate_1.matchesObject({\n    index: type_validate_1.matchesPositiveInteger()\n  });\n\n  if (data) {\n    var dataSchema = type_validate_1.matchesObject({\n      data: data\n    });\n    return utils_1.createActionValidator(Cart_1.ActionType, type_validate_1.composeSchemas(indexSchema, dataSchema), true, true);\n  }\n\n  return utils_1.createActionValidator(Cart_1.ActionType, indexSchema, true, true);\n}\n\nfunction getDiscountSchema(data) {\n  if (data.amount) {\n    return discountAmount;\n  }\n\n  return discountCode;\n}\n\nfunction validateAction(action) {\n  switch (action.type) {\n    case Cart_1.ActionType.UPDATE:\n      return type_validate_1.validate(action, createDataValidator(cartSchema));\n\n    case Cart_1.ActionType.SET_CUSTOMER:\n      return type_validate_1.validate(action, createDataValidator(customerSchema));\n\n    case Cart_1.ActionType.ADD_CUSTOMER_ADDRESS:\n      return type_validate_1.validate(action, createDataValidator(addressSchema));\n\n    case Cart_1.ActionType.UPDATE_CUSTOMER_ADDRESS:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(addressSchema));\n\n    case Cart_1.ActionType.SET_DISCOUNT:\n      return type_validate_1.validate(action, createDataValidator(getDiscountSchema(action.payload.data)));\n\n    case Cart_1.ActionType.SET_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidator(propertiesSchema));\n\n    case Cart_1.ActionType.REMOVE_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidator(matchesStringArray));\n\n    case Cart_1.ActionType.ADD_LINE_ITEM:\n      return type_validate_1.validate(action, createDataValidator(lineItemSchema));\n\n    case Cart_1.ActionType.UPDATE_LINE_ITEM:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(updateLineItemSchema));\n\n    case Cart_1.ActionType.REMOVE_LINE_ITEM:\n      return type_validate_1.validate(action, createDataValidatorWithIndex());\n\n    case Cart_1.ActionType.SET_LINE_ITEM_DISCOUNT:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(discountAmount));\n\n    case Cart_1.ActionType.REMOVE_LINE_ITEM_DISCOUNT:\n      return type_validate_1.validate(action, createDataValidatorWithIndex());\n\n    case Cart_1.ActionType.SET_LINE_ITEM_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(propertiesSchema));\n\n    case Cart_1.ActionType.REMOVE_LINE_ITEM_PROPERTIES:\n      return type_validate_1.validate(action, createDataValidatorWithIndex(matchesStringArray));\n\n    case Cart_1.ActionType.FETCH:\n    case Cart_1.ActionType.REMOVE_CUSTOMER:\n    case Cart_1.ActionType.REMOVE_DISCOUNT:\n    case Cart_1.ActionType.CLEAR:\n    default:\n      return type_validate_1.validate(action, utils_1.createActionValidator(Cart_1.ActionType, undefined, false, true));\n  }\n}\n\nexports.validateAction = validateAction;","map":null,"metadata":{},"sourceType":"script"}